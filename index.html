<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>CYBER SICH: THE ARMORY</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://unpkg.com/@tonconnect/ui@latest/dist/tonconnect-ui.min.js"></script>
    <style>
        :root { --neon: #00f2ff; --gold: #fff200; --rare: #bd00ff; --bg: #050508; }
        body { background: var(--bg); color: #fff; font-family: 'Segoe UI', sans-serif; margin: 0; overflow: hidden; }
        #game-container { display: flex; flex-direction: column; height: 100vh; padding: 20px; background: radial-gradient(circle at top, #0a0a15 0%, #050508 100%); }
        
        /* Stats Styling */
        .panel { background: rgba(255, 255, 255, 0.02); border: 1px solid rgba(0, 242, 255, 0.1); border-radius: 16px; padding: 15px; margin-bottom: 12px; }
        .balance-val { font-size: 38px; font-weight: 900; text-align: center; color: #fff; text-shadow: 0 0 20px rgba(255,255,255,0.2); }
        
        /* Tabs */
        .nav-bar { display: flex; gap: 8px; margin-bottom: 15px; }
        .nav-btn { flex: 1; padding: 10px; border-radius: 10px; border: 1px solid #222; background: #111; color: #555; font-size: 11px; font-weight: bold; }
        .nav-btn.active { border-color: var(--neon); color: var(--neon); background: rgba(0,242,255,0.05); }

        /* NFT Cards Modern View */
        .nft-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; overflow-y: auto; max-height: 60vh; padding-bottom: 20px; }
        .nft-card { background: linear-gradient(135deg, #111 0%, #080808 100%); border: 1px solid #222; border-radius: 12px; padding: 10px; position: relative; overflow: hidden; }
        .nft-card.legendary { border: 1px solid var(--gold); box-shadow: 0 0 15px rgba(255,242,0,0.15); }
        .nft-card.rare { border: 1px solid var(--rare); }
        .nft-rarity { font-size: 8px; text-transform: uppercase; padding: 2px 6px; border-radius: 4px; position: absolute; top: 8px; right: 8px; }
        
        .stat-bar { height: 4px; background: #222; border-radius: 2px; margin-top: 5px; overflow: hidden; }
        .stat-fill { height: 100%; background: var(--neon); width: 0%; transition: 1s; }

        .btn-action { background: var(--neon); color: #000; border: none; padding: 16px; border-radius: 12px; font-weight: 900; width: 100%; letter-spacing: 1px; margin-top: 10px; }
        .btn-lotto { background: var(--gold); }
    </style>
</head>
<body>
    <div id="game-container">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:15px;">
            <div style="color:var(--neon); font-weight:900; letter-spacing:2px;">SICH_v1.1</div>
            <div id="ton-connect"></div>
        </div>

        <div class="panel">
            <div style="text-align:center; font-size:10px; color:#666; letter-spacing:1px;">CORE BALANCE</div>
            <div class="balance-val" id="sich-val">0.00</div>
            <div id="mining-anim" style="text-align:center; font-size:10px; color:var(--neon); opacity:0.6;">● MINING ACTIVE</div>
        </div>

        <div class="nav-bar">
            <button class="nav-btn active" onclick="setTab('stake', this)">STAKE</button>
            <button class="nav-btn" onclick="setTab('lotto', this)">LOTTO</button>
            <button class="nav-btn" onclick="setTab('nft', this)">ARMORY</button>
        </div>

        <div id="tab-stake" class="tab-content">
            <div class="panel">
                <div style="display:flex; justify-content:space-between; margin-bottom:10px;">
                    <span style="font-size:12px; color:#888;">Staked TON/SICH:</span>
                    <span id="lp-val" style="color:var(--gold); font-weight:bold;">0.00</span>
                </div>
                <div style="font-size:10px; color:#555; margin-bottom:15px;">APR: 124.5% + NFT Chance Boost</div>
                <button class="btn-action" onclick="doStake()">UPGRADE NODE</button>
            </div>
        </div>

        <div id="tab-lotto" class="tab-content" style="display:none;">
            <div class="panel">
                <div style="text-align:center; margin-bottom:15px;">
                    <div style="font-size:10px; color:#888;">CURRENT JACKPOT</div>
                    <div style="font-size:24px; color:var(--gold); font-weight:900;">4,500 $SICH</div>
                </div>
                <button class="btn-action btn-lotto" onclick="buyTicket()">GET TICKET (10 SICH)</button>
            </div>
        </div>

        <div id="tab-nft" class="tab-content" style="display:none;">
            <div class="nft-grid" id="nft-list">
                </div>
        </div>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();

        let state = { sich: 100.0, lp: 0.0, mult: 1.0, nfts: [] };

        const tonConnectUI = new TON_CONNECT_UI.TonConnectUI({
            manifestUrl: 'https://cybersich.vercel.app/tonconnect-manifest.json',
            buttonRootId: 'ton-connect'
        });

        // Mining Engine
        setInterval(() => {
            state.sich += (0.005 * state.mult);
            document.getElementById('sich-val').innerText = state.sich.toFixed(2);
        }, 1000);

        function setTab(name, el) {
            tg.HapticFeedback.impactOccurred('light');
            document.querySelectorAll('.tab-content').forEach(t => t.style.display = 'none');
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
            document.getElementById('tab-' + name).style.display = 'block';
            el.classList.add('active');
            if(name === 'nft') renderNFTs();
        }

        function doStake() {
            if(!tonConnectUI.connected) return tg.showAlert("Connect Wallet!");
            state.lp += 1.0; state.mult += 0.2;
            document.getElementById('lp-val').innerText = state.lp.toFixed(2);
            tg.HapticFeedback.notificationOccurred('success');
        }

        function buyTicket() {
            if(state.sich < 10) return tg.showAlert("Low SICH!");
            state.sich -= 10;
            tg.HapticFeedback.impactOccurred('heavy');
            tg.showPopup({title:'Lotto', message:'Ticket active. 2 SICH burned.'});
        }

        function renderNFTs() {
            const list = document.getElementById('nft-list');
            list.innerHTML = '';
            const demoNFTs = [
                {name: 'Джура #04', rare: 'common', p: 40},
                {name: 'Отаман #01', rare: 'legendary', p: 95},
                {name: 'Характерник', rare: 'rare', p: 70}
            ];
            demoNFTs.forEach(n => {
                let card = document.createElement('div');
                card.className = `nft-card ${n.rare}`;
                card.innerHTML = `
                    <div class="nft-rarity" style="background:${n.rare==='legendary'?'#fff200':'#222'}; color:#000">${n.rare}</div>
                    <div style="font-size:12px; font-weight:bold; margin-bottom:10px;">${n.name}</div>
                    <div style="font-size:9px; color:#666;">POWER: ${n.p}%</div>
                    <div class="stat-bar"><div class="stat-fill" style="width:${n.p}%"></div></div>
                `;
                list.appendChild(card);
            });
        }
    </script>
</body>
</html>

